# 🎁선물하기 펀딩 서비스 (11.13 ~ 12.15)
사용자가 등록한 상품에 대해 다른 사용자들이 펀딩개념으로 자금을 모을 수 있는 서비스 입니다.

## 프로젝트 기능 및 설계
### [회원가입 & 로그인]

⭐회원가입
  - 자체 회원가입
  - 소셜로그인 (OAuth) : 카카오, 네이버

⭐로그인 (JWT + Redis)
  - JWT의 보안강화를 위해 Refresh Token을 Redis에 저장하는 방식으로 구현.

### [회원 관련 기능]
⭐회원 정보 조회
  - 본인의 회원 정보와 등록한 상품 & 상품의 펀딩 정보 확인 가능.

⭐사용자 검색
  - 이메일을 통해 사용자 검색
  -> ES 이용한 구현
    
⭐친구 추가 요청
  - 기존 친구가 아닌 사용자에 대해 친구 추가 요청을 보낼 수 있음.
  - 현재 친구 추가 요청을 보내지 않은 사용자에 대해 요청을 보낼 수 있음.
    
⭐친구요청 목록 조회
  - 현재 자신에게 들어온 친구 추가 요청 목록을 확인.

⭐친구요청 수락/거절
  - 친구 요청을 수락하면 요청테이블에서 친구 목록 테이블로 이동.
  - 거절하면 요청테이블에서 삭제.

⭐친구목록 조회
  - 친구인 사용자들의 목록 조회
    
### [상품]
⭐전체 상품 목록 조회
  - 상품 테이블에 저장된 상품 정보를 랭킹 순으로 조회
    
⭐ 상품 검색
  - ES를 이용해 상품 조회
    
⭐ 상품 추가
  - 펀딩을 진행할 자신의 상품으로 등록.
  - 상품 등록 시 펀딩 진행 기간은 1년으로 자동 지정.
      
⭐ 상품 등록 취소
  - 등록한 상품 중에서 취소 가능
  - 펀딩이 진행되고 있던 상황이라면 선택한 다른 상품에 펀딩금액 이전 or 자기 지갑으로 펀딩 금액 옮길지 선택 가능.

### [펀딩]
⭐ 사용자가 등록한 상품 조회
  - 사용자가 등록해놓은 상품과 펀딩 현황 확인
    - 펀딩 진행률이 높은 현황으로 정렬.
  - 친구로 등록된 사용자의 상품만 확인 가능.
    
⭐ 후원하기
  - 상대방이 등록해놓은 펀딩 상품에 대해 후원할 금액을 입력해서 지갑에서 금액 감소 후 후원완료.
  - 지갑의 돈은 펀딩 금액보다 커야함. (작을 시 미리 충전해서 사용)
    -> 동시성 이슈 
    
⭐ 후원취소
  - 후원 진행 후 1시간 이내의 건에 대해서만 취소 가능.
  - 취소 후 후원자의 지갑으로 금액 반환.
  - 후원한 상품에도 취소 금액만큼 펀딩 총액 감소.

⭐ 펀딩 금액 달성
  - 마감일 이전에 펀딩 금액 달성 시 더 이상 다른 사용자의 펀딩 불가.
  - 펀딩이 완료된 상품에 대해서 펀딩자의 지갑으로 금액 이전 불가.
  - 달성 및 주소 확인 메일 전송 후 1일 뒤 지정한 주소로 상품 배송.
  - 배송 후 펀딩자의 펀딩 상품 목록에서 숨겨짐.

⭐ 펀딩 금액 미달성
  - 마감일 임박 3일 전부터 안내 메일 발송.
  - 마감일 도래 시 펀딩 상품 목록에서 숨겨짐.
  - 마감일까지 펀딩이 완료되지 않았다면 사용자의 지갑으로 펀딩 금액만큼 들어옴.
    
⭐ 펀딩 중도 취소
  - 마감일 이전에 펀딩자가 진행 중이던 펀딩을 취소한 경우
  - 사유 입력 후 확정 시 펀딩자의 펀딩 상품 목록에서 숨겨지고 펀딩 진행 금액은 펀딩자의 지갑으로 반환.

### [결제]
⭐ 내 지갑으로 금액 충전
  - 결제 금액만큼 금액 충천. 

## ERD

## Trouble Shooting

## Tech Stack
